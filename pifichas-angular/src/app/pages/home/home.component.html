<div class="home-page">
  <div class="page-header">
    <h1>GestiÃ³n de Alumnos</h1>
    <button class="btn-report" (click)="mostrarFormulario = !mostrarFormulario" style="background-color: #007bff; color: white; margin-top: 10px;">
      {{ mostrarFormulario ? 'Ver Lista' : '+ AÃ±adir Alumno' }}
    </button>
  </div>

  <div *ngIf="mostrarFormulario">
    <app-add-alumno (guardado)="onAlumnoGuardado()"></app-add-alumno>
  </div>

  <div *ngIf="!mostrarFormulario">
    <div class="search-filter-section">
      <div class="search-field">
        <input type="text" class="input-field" [(ngModel)]="searchQuery" (input)="onSearchChange()" placeholder="Buscar alumno por nombre/ID">
      </div>
      <div class="filter-field">
        <input type="text" class="input-field" [(ngModel)]="filterQuery" (input)="onFilterChange()" placeholder="Filtrar por Clase/Grupo">
      </div>
    </div>

    <div *ngIf="loading && filteredStudents.length === 0" class="no-results">
      <p>Cargando datos del servidor...</p>
    </div>

    <div class="table-container" *ngIf="filteredStudents.length > 0">
      <table class="students-table">
        <thead class="table-header">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Apellidos</th>
            <th>DNI</th>
            <th>Curso</th>
            <th>Contacto Tutor</th>
            <th class="action-cell">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-row" *ngFor="let student of filteredStudents">
            <td>{{ student.id }}</td>
            <td>{{ student.nombre }}</td>
            <td>{{ student.apellidos }}</td>
            <td>{{ student.dni }}</td>
            <td>{{ student.curso_nombre || (student.grupo || 'Sin curso') }}</td>
            <td>{{ student.contacto_tutor }}</td>
            <td class="action-cell">
              <button class="btn-report" (click)="goToDetail(student.id)">ðŸ“‹ Informe</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="!loading && filteredStudents.length === 0" class="no-results">
      No se han encontrado alumnos.
    </div>
  </div>
</div>